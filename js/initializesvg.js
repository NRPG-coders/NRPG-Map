"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var o=0,n=Array(e.length);o<e.length;o++)n[o]=e[o];return n}return Array.from(e)}function getInfo(e){return zones[zoneReference[e]]}function triggerInfo(e){!geid("hover")||(geid("hover").innerHTML="Hovered zone id: "+e);var o=getInfo(e),n=o.details,t=Factions[n.owner];[].concat(_toConsumableArray(document.getElementsByClassName("blurbTitle"))).forEach(function(e){e.style.color=o.text}),[].concat(_toConsumableArray(document.getElementsByClassName("blurbSubtitle"))).forEach(function(e){e.style.color=o.text}),[].concat(_toConsumableArray(document.getElementsByClassName("blurbText"))).forEach(function(e){e.style.color=o.bw}),geid("blurbContent").style.backgroundColor=o.background,geid("blurbName").innerHTML=n.name,geid("blurbOwner").innerHTML=n.owner,geid("blurbZoneBlurb").innerHTML=n.blurb,geid("blurbFactionBlurb").innerHTML=t?t.blurb:"-"}function triggerExpandedInfo(e){!geid("click")||(geid("click").innerHTML="Clicked zone id: "+e);var o=getInfo(e),n=o.details,t=Factions[n.owner];[].concat(_toConsumableArray(document.getElementsByClassName("longTitle"))).forEach(function(e){e.style.color=o.text}),[].concat(_toConsumableArray(document.getElementsByClassName("longSubtitle"))).forEach(function(e){e.style.color=o.text}),[].concat(_toConsumableArray(document.getElementsByClassName("longText"))).forEach(function(e){e.style.color=o.bw}),geid("longContent").style.backgroundColor=o.background,geid("longName").innerHTML=n.name,geid("longOwner").innerHTML=n.owner,geid("longZoneLong").innerHTML=n.long,geid("longFactionLong").innerHTML=t?t.long:"-"}function untriggerInfo(){}function untriggerExpandedInfo(){}function selectZone(e){var o=getInfo(e);if(o.g){var n=!0,t=!1,r=void 0;try{for(var l,i=geid(e).childNodes[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var a=l.value;a.tagName&&(a.style.fill="#fff")}}catch(e){t=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(t)throw r}}}else o.e.node.style.fill="#fff";untriggerExpandedInfo(),triggerExpandedInfo(e)}function hoverZone(e){var o=zones[zoneReference[e]];if(o.g){var n=!0,t=!1,r=void 0;try{for(var l,i=geid(e).childNodes[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var a=l.value;a.tagName&&(a.style.fill="#ddd")}}catch(e){t=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(t)throw r}}}else o.e.node.style.fill="#ddd";untriggerInfo(),triggerInfo(e)}function customresethandler(){var e=getInfo(this.id());try{o=Factions[e.details.owner].color}catch(e){var o=defaultColor}if(e.g){var n=!0,t=!1,r=void 0;try{for(var l,i=geid(e.id).childNodes[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var a=l.value;a.tagName&&(a.style.fill=o)}}catch(e){t=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(t)throw r}}}else e.e.node.style.fill=o}function customresetcaller(){zones.forEach(function(e){e.id!==selectedZone&&e.e.fire("customreset")})}function delayedMouseover(e,o){e.mouseout||(e.id!==selectedZone?(customresetcaller(),hoverZone(o)):(customresetcaller(),untriggerInfo(),triggerInfo(o)))}function mouseoverhandler(){var e=getInfo(this.id());e.mouseout=!1,setTimeout(delayedMouseover,50,e,e.id)}function mouseouthandler(){selectedZone||(getInfo(this.id()).mouseout=!0)}function clickhandler(){var e=getInfo(this.id());selectedZone===e.id?(selectedZone=null,e.e.fire("customreset"),delayedMouseover(e,e.id),untriggerExpandedInfo()):(selectedZone=e.id,customresetcaller(),selectZone(e.id))}function ontouchstarthandler(){var e=getInfo(this.id());e.e.fire("mouseover"),e.e.fire("click")}function adopt(){var e=!0,o=!1,n=void 0;try{for(var t,r=geid("The_Ninja_World").childNodes[Symbol.iterator]();!(e=(t=r.next()).done);e=!0){var l=t.value;if(l.tagName){if(!l.id)throw"Element lacks id!";var i=ZoneDetails[l.id];zoneReference[l.id]=zones.length;var a=Factions[i.owner]&&Factions[i.owner].color||"#000000",c=Factions[i.owner]&&Factions[i.owner].textOverride||invertColor(a),d=Factions[i.owner]&&Factions[i.owner].invertOverride||Factions[i.owner].textOverride&&invertColor(invertColor(c),!0)||invertColor(a,!0);zones.push({g:"g"===l.tagName.toLowerCase(),e:SVG.adopt(l),id:l.id,details:i,background:a,text:c,bw:d,mouseout:!1})}}}catch(e){o=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(o)throw n}}zones.forEach(function(e,o){var n=e.e;n.mouseover(mouseoverhandler),n.mouseout(mouseouthandler),n.click(clickhandler),n.on("customreset",customresethandler),n.on("touchstart",ontouchstarthandler),n.fire("customreset")})}var geid=document.getElementById.bind(document),defaultColor="#b2b2b2",zones=[],zoneReference={},selectedZone=void 0;addload(adopt),addload(function(){window.map=svgPanZoom("#The_Best_Map_Ever",{panEnabled:!0,controlIconsEnabled:!0,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.5,minZoom:1,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto"})});